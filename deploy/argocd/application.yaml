---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: hacky-app
  namespace: argocd
  finalizers:
    - resources-finalizer.argocd.argoproj.io
  labels:
    name: hacky-app
spec:
  project: default
  syncPolicy:
    automated:
      prune: true
      allowEmpty: true
  destination:
    namespace: hacky-app
    server: https://kubernetes.default.svc
  sources:
  - path: deploy/consul
    repoURL: https://github.com/WJ-Labs/hacky-app
    targetRevision: develop
  - chart: sample-app
    path: charts/sample-app
    repoURL: gs://wjlabs_helm_charts
    targetRevision: v1
    helm:
      releaseName: sample-app-v1
      valueFiles:
      - values-v1.yaml
  - chart: sample-app
    path: charts/sample-app
    repoURL: gs://wjlabs_helm_charts
    targetRevision: v2
    helm:
      releaseName: sample-app-v2
      valueFiles:
      - values-v2.yaml